package calculette_code;
import controleur.Controleur;

public class Accumulateur implements IAccumulateur {

	Pile memory;
	String entry ;
	double nombre; //resultat de l'opération (addition, soustraction...) que l'on réinitialise à chaque fin d'opération OU lecture de la chaine string
	//Controleur controleur; est ce qu'on en a besoin?
	
	public Accumulateur() {
		memory = new Pile();
		entry = "";
		nombre = 0;
	}
	
	public double stringToDouble(String s) {
		return Double.parseDouble(s);
	}
	
	//Entre dans la mémoire (pile) le nombre tapé
	public void push() {
		memory.push(nombre);
	}
	
	//Supprime le dernier élément de la pile
	public void drop(){
		double a = memory.pop();
	}
	
	
	//Inverse l'ordre des deux derniers éléments de la pile
	public void swap() {
		double d1 = memory.pop();
		double d2= memory.pop();
		memory.push(d1);
		memory.push(d2);
	}
	
	
	//additionne les deux derniers nombres saisis
	public void add() {
		double d1 = memory.pop();
		double d2= memory.pop();
		nombre = d1 + d2;
		push();
	}
	
	
	//soustraie le dernier élément saisi à l'avant-dernier
	public void sub() {
		double d1 = memory.pop();
		double d2= memory.pop();
		nombre = d2 - d1;
		push();
	}
	
	
	//Mutiplie les deux derniers nombres saisis
	public void mult() {
		double d1 = memory.pop();
		double d2= memory.pop();
		nombre = d1 * d2;
		push();
	}
	
	//Divise l'avant dernier élément saisi par le premier
	public void div() {
		double d1 = memory.pop();
		double d2= memory.pop();
		nombre = d2 / d1;
		push();
	}

	//Transforme un nombre saisi en son opposé
	public void neg() {
		double d = memory.pop();
		nombre = -d;
		push();
	}
	
	
	public void backspace() {
		int n = entry.length();
		if (n>=2) {
			entry.substring(0, n-2);}
		else {
			entry = "";
		}
	}
	
	public String accumuler(String character) {
		entry += character;
		return entry;
	}
	
	public void reset() {
		entry = "";
		nombre = 0;
		memory.clear();
	}
	
	//getters et setters
	public Pile getMemory() {
		return memory;
	}

	public void setMemory(Pile memory) {
		this.memory = memory;
	}

	public String getEntry() {
		return entry;
	}

	public void setEntry(String entry) {
		this.entry = entry;
	}

	public double getNombre() {
		return nombre;
	}

	public void setNombre(double nombre) {
		this.nombre = nombre;
	}
	
	
}
